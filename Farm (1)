-- [[ MODIFIED SCRIPT WITH SEPARATED WEBHOOKS ]]

task.wait(5)

-- === CONFIGURATION & WEBHOOK ===
getgenv().AutoRadioactive = true

-- 1. Webhook untuk notifikasi Dupe Berhasil
local webhook_url = "https://discord.com/api/webhooks/1433619088588017684/02wMrYk7vdbmgEz46dCdDiJrj9QONW7SKqAibBQdwO__JaFuRycX_6L-nmLSpJd_-Xb9" 

-- 2. Webhook untuk info akun yang punya > 1 Galactio (Setiap 30 Menit)
local checker_webhook_url = "https://discord.com/api/webhooks/1466083152073195530/NvOMzqOKfzUKn-rNw-4mx6dDxVwe0gPLfMJMut1QSRFTVI5OK5x-APBf72tJMCNZWvYQ" 

local targetBrainrot = "Galactio Fantasma"
local targetLevel = 125
local targetMutation = "Admin"
local waitTime = 45.5 * 60

-- Services
local player = game.Players.LocalPlayer
local RS = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local UIS = game:GetService("UserInputService")
local coreGui = game:GetService("CoreGui")

-- === FUNCTIONS ===

-- Handler pengiriman (Dibuat dinamis agar bisa kirim ke URL berbeda)
local function sendToDiscord(url, data)
    local request = syn and syn.request or http_request or request or HttpPost
    if request then
        request({
            Url = url, 
            Method = "POST", 
            Headers = {["Content-Type"] = "application/json"}, 
            Body = HttpService:JSONEncode(data)
        })
    end
end

local function countTargetInventory()
    local total = 0
    local locations = {player.Backpack:GetChildren(), (player.Character and player.Character:GetChildren() or {})}
    for _, list in pairs(locations) do
        for _, item in pairs(list) do
            if item:IsA("Tool") then
                local bName = item:GetAttribute("BrainrotName") or item.Name
                if bName == targetBrainrot and item:GetAttribute("Level") == targetLevel and item:GetAttribute("Mutation") == targetMutation then
                    total = total + 1
                end
            end
        end
    end
    return total
end

-- Webhook 1: Notifikasi Dupe Berhasil
local function sendWebhookDupe(oldC, newC)
    local data = {
        ["content"] = "üöÄ **DUPE SUCCESS!**",
        ["embeds"] = {{
            ["title"] = "Auto Dupe Detection",
            ["color"] = 65280, -- Hijau
            ["fields"] = {
                {["name"] = "Item", ["value"] = targetBrainrot, ["inline"] = false},
                {["name"] = "Inventory Sebelum", ["value"] = tostring(oldC), ["inline"] = true},
                {["name"] = "Inventory Sesudah", ["value"] = tostring(newC), ["inline"] = true}
            },
            ["footer"] = {["text"] = "Dupe Log ‚Ä¢ " .. os.date("%X")}
        }}
    }
    sendToDiscord(webhook_url, data)
end

-- Webhook 2: Notifikasi Akun Multiple Items (Setiap 30 Menit)
local function sendInventoryReport(count)
    local data = {
        ["content"] = "üì¢ **INVENTORY STATUS REPORT**",
        ["embeds"] = {{
            ["title"] = "Multiple Item Alert!",
            ["description"] = "Akun ini memiliki lebih dari satu **" .. targetBrainrot .. "**",
            ["color"] = 16753920, -- Oranye/Emas
            ["fields"] = {
                {["name"] = "Username", ["value"] = "||" .. player.Name .. "||", ["inline"] = true},
                {["name"] = "Total Dimiliki", ["value"] = "**" .. tostring(count) .. " Unit**", ["inline"] = true}
            },
            ["footer"] = {["text"] = "Periodic Check ‚Ä¢ " .. os.date("%X")},
            ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }}
    }
    sendToDiscord(checker_webhook_url, data)
end

-- === INVENTORY CHECKER LOOP (Background Task) ===
task.spawn(function()
    while true do
        local currentCount = countTargetInventory()
        if currentCount > 1 then
            sendInventoryReport(currentCount)
        end
        task.wait(30 * 60) -- Jeda 30 menit
    end
end)

-- === MAIN DUPE LOGIC (Disederhanakan untuk Review) ===
-- [Gunakan logika dupe dari script asli Anda di sini]
-- Pastikan saat memanggil fungsi sendWebhook, gunakan: sendWebhookDupe(countBefore, countAfter)

-- === KEYBIND LISTENER (Ubah ke P) ===
UIS.InputBegan:Connect(function(input, processed)
    if processed then return end
    if input.KeyCode == Enum.KeyCode.P then -- Diubah ke tombol P
        if getgenv().AutoRadioactive then
            _G.ForceDupeNow = true
        end
    end
end)

-- === UI SETUP ===
[cite_start]if coreGui:FindFirstChild("RadioactiveTimerUI") then coreGui:FindFirstChild("RadioactiveTimerUI"):Destroy() end [cite: 8]
[cite_start]local sg = Instance.new("ScreenGui", coreGui); [cite: 8]
[cite_start]sg.Name = "RadioactiveTimerUI" [cite: 8]
[cite_start]local MainFrame = Instance.new("Frame", sg) [cite: 8]
[cite_start]MainFrame.Size = UDim2.new(0, 220, 0, 150); [cite: 8]
[cite_start]MainFrame.Position = UDim2.new(0.8, 0, 0.5, 0) [cite: 9]
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30); [cite_start]MainFrame.Active = true; [cite: 9]
[cite_start]MainFrame.Draggable = true [cite: 10]
[cite_start]Instance.new("UICorner", MainFrame) [cite: 10]

[cite_start]local StatusLabel = Instance.new("TextLabel", MainFrame) [cite: 10]
[cite_start]StatusLabel.Size = UDim2.new(1, 0, 0, 40); [cite: 10]
[cite_start]StatusLabel.Position = UDim2.new(0, 0, 0.2, 0) [cite: 11]
StatusLabel.TextColor3 = Color3.fromRGB(0, 170, 255); [cite_start]StatusLabel.BackgroundTransparency = 1; [cite: 11]
[cite_start]StatusLabel.Font = Enum.Font.Gotham [cite: 12]

[cite_start]local ToggleBtn = Instance.new("TextButton", MainFrame) [cite: 12]
[cite_start]ToggleBtn.Size = UDim2.new(0.8, 0, 0, 30); [cite: 12]
[cite_start]ToggleBtn.Position = UDim2.new(0.1, 0, 0.6, 0) [cite: 13]
[cite_start]ToggleBtn.Text = "AUTO DUPE: ON"; [cite: 13]
[cite_start]ToggleBtn.BackgroundColor3 = Color3.fromRGB(46, 204, 113) [cite: 14]
[cite_start]Instance.new("UICorner", ToggleBtn) [cite: 14]

ToggleBtn.MouseButton1Click:Connect(function()
    [cite_start]getgenv().AutoRadioactive = not getgenv().AutoRadioactive [cite: 14]
    [cite_start]ToggleBtn.Text = getgenv().AutoRadioactive and "AUTO DUPE: ON" or "AUTO DUPE: OFF" [cite: 14]
    [cite_start]ToggleBtn.BackgroundColor3 = getgenv().AutoRadioactive and Color3.fromRGB(46, 204, 113) or Color3.fromRGB(192, 57, 43) [cite: 14]
end)

-- === MAIN LOOP ===
task.spawn(function()
    while true do
        if getgenv().AutoRadioactive then
            [cite_start]local timeLeft = waitTime [cite: 15]
            local unequipTriggered = false 
            
            while timeLeft > 0 and getgenv().AutoRadioactive do
                -- Cek Keybind P
                if _G.ForceDupeNow then
                    _G.ForceDupeNow = false
                    break
                end

                [cite_start]StatusLabel.Text = "Next Dupe: " .. math.floor(timeLeft/60) .. "m " .. (timeLeft%60) .. "s" [cite: 16]
                
                [cite_start]if timeLeft <= 30 and not unequipTriggered then [cite: 16]
                    [cite_start]unequipAll() [cite: 16]
                    [cite_start]unequipTriggered = true [cite: 16]
                end
                
                [cite_start]task.wait(1) [cite: 17]
                [cite_start]timeLeft = timeLeft - 1 [cite: 17]
            end

            if getgenv().AutoRadioactive then
                [cite_start]local char = player.Character [cite: 18]
                [cite_start]local root = char and char:FindFirstChild("HumanoidRootPart") [cite: 18]
                [cite_start]local hum = char and char:FindFirstChildOfClass("Humanoid") [cite: 18]
                
                if root and hum then
                    [cite_start]StatusLabel.Text = "Teleporting..." [cite: 18]
                    [cite_start]root.CFrame = CFrame.new(targetPosSpawn) [cite: 19]
                    [cite_start]task.wait(0.5) [cite: 19]
                    [cite_start]setFreeze(true) [cite: 19]

                    [cite_start]StatusLabel.Text = "Cleaning Machine..." [cite: 19]
                    [cite_start]spawnRemote:InvokeServer("Withdraw", machinePath) [cite: 19]
                    [cite_start]task.wait(1) [cite: 20]

                    [cite_start]local countBefore = countTargetInventory() [cite: 20]

                    [cite_start]local unit = nil [cite: 20]
                    [cite_start]for _, v in pairs(player.Backpack:GetChildren()) do [cite: 20]
                        [cite_start]if v:GetAttribute("BrainrotName") == targetBrainrot and v:GetAttribute("Level") == targetLevel and v:GetAttribute("Mutation") == targetMutation then [cite: 21]
                            [cite_start]unit = v break [cite: 21]
                        end
                    end

                    if unit then
                        [cite_start]StatusLabel.Text = "Holding Item..." [cite: 22]
                        [cite_start]hum:EquipTool(unit) [cite: 22]
                        [cite_start]task.wait(2) [cite: 22]

                        [cite_start]StatusLabel.Text = "Depositing..." [cite: 23]
                        [cite_start]spawnRemote:InvokeServer("Deposit", machinePath) [cite: 23]
                        [cite_start]task.wait(2) [cite: 23]

                        [cite_start]StatusLabel.Text = "Combining..." [cite: 24]
                        [cite_start]spawnRemote:InvokeServer("Combine", machinePath) [cite: 24]
                        
                        for i = 5, 1, -1 do
                            [cite_start]StatusLabel.Text = "Detecting in " .. i .. "s..." [cite: 25]
                            [cite_start]task.wait(1) [cite: 25]
                        end
                        
                        [cite_start]local countAfter = countTargetInventory() [cite: 26]
                        [cite_start]if countAfter > countBefore then [cite: 26]
                            [cite_start]StatusLabel.Text = "‚úÖ SUCCESS!" [cite: 26]
                            [cite_start]sendWebhook(countBefore, countAfter) [cite: 27]
                        else
                            [cite_start]StatusLabel.Text = "‚ùå Failed (No Gain)" [cite: 27]
                        end
                    else
                        [cite_start]StatusLabel.Text = "‚ö†Ô∏è Item Not Found!" [cite: 28]
                    end
                    [cite_start]setFreeze(false) [cite: 29]
                    [cite_start]task.wait(5) [cite: 29]
                end
            end
        else
            [cite_start]StatusLabel.Text = "System Paused"; [cite: 30]
            [cite_start]task.wait(1) [cite: 30]
        end
    end
end)
